@{
    ViewBag.Title = "Index";
}

<style>
    .itemscls {
        margin-top: 40px;
        margin-bottom:40px;
    }
</style>



<script type="text/javascript">

    var from1 = new Ext.FormPanel({
        buttonAlign: 'center',
        labelAlign: "right",
        layout: "hbox",

        layoutConfig: {
            padding: '5',
            pack: 'center',
            align: 'middle'
        },
        defaults: { margins: '0 5 0 0' },
        title: "Good",

        items: [
            {
                xtype: 'fieldset',
                width: 600,
                layout: "form",
                itemCls: "itemscls",
                collapsible: false,
                items: [
                    {
                        fieldLabel: '名称',
                        name: 'Name',
                        xtype: 'textfield',
                        width: 300
                    }, {
                        fieldLabel: '类型',
                        name: 'OrgType',
                        xtype: 'combo',
                        //本地数据源  local/remote
                        mode: 'local',
                        //设置为选项的text的字段
                        displayField: "Name",
                        //设置为选项的value的字段 
                        valueField: "Id",
                        //是否可以输入，还是只能选择下拉框中的选项
                        editable: false,
                        typeAhead: true,
                        //必须选择一项
                        forceSelection: true,
                        //输入部分选项内容匹配的时候显示所有的选项
                        triggerAction: 'all',
                        //selectOnFocus:true,
                        //数据
                        store: new Ext.data.SimpleStore({
                            fields: ['Id', 'Name'],
                            data: [[1, '单位'], [2, '部门'], [3, '岗位']]
                        }),
                        width: 300
                    }, {
                        fieldLabel: '状态',
                        name: 'InUse',

                        xtype: 'combo',
                        //本地数据源  local/remote
                        mode: 'local',
                        //设置为选项的text的字段
                        displayField: "Name",
                        //设置为选项的value的字段 
                        valueField: "Id",
                        //是否可以输入，还是只能选择下拉框中的选项
                        editable: false,
                        typeAhead: true,
                        //必须选择一项
                        forceSelection: true,
                        //输入部分选项内容匹配的时候显示所有的选项
                        triggerAction: 'all',
                        //selectOnFocus:true,
                        //数据
                        store: new Ext.data.SimpleStore({
                            fields: ['Id', 'Name'],
                            data: [[1, '启用'], [2, '停用']]
                        }),
                        width: 300
                    }, {
                        fieldLabel: '备注',
                        xtype: 'textarea',
                        name: "Remark",
                        height: 50,
                        width: 300
                    }, {
                        xtype: 'compositefield',
                        style: "margin-top:30px",
                        fieldLabel: '移动',
                        items: [
                            { xtype: 'textfield', id: "move", readonly: true, width: 250 },
                            {
                                xtype: 'button', width: 50, text: "选择", style: "left:250px", listeners: {
                                    click: function (btn, e) {
                                        CreateMoveWindow().show();
                                    },
                                    render: function (btn, e) {
                                        console.log(btn);
                                    }
                                }
                            },
                            { xtype: 'button', width: 50, text: "确定移动", style: "margin-left:0px;margin-right:0px;" },
                        ]
                    }, {
                        xtype: "button",
                        text: "123",
                        style:"float:right"
                    }, {
                        xtype: "button",
                        text: "1234",
                        style:"float:right"
                    }
                ]
            }
        ],

    });

    Ext.onReady(function () {
        Ext.QuickTips.init();
        new Ext.Viewport({
            title: "Viewport",
            layout: "border",
            defaults: {
                bodyStyle: "background-color: #FFFFFF;",
            },
            items: [
                        {
                            region: 'west',
                            title: '组织机构',
                            xtype: 'treepanel',
                            width: 200,
                            autoScroll: true,
                            loader: new Ext.tree.TreeLoader({
                                url: '/Api/Organization/GetOrganizationsAndUser?id=null'
                            }),
                            root: new Ext.tree.AsyncTreeNode({
                                expanded: true,
                            }),
                            rootVisible: false,
                            listeners: {
                                click: function (n) {
                                    var panel1 = Ext.getCmp("panel1");
                                    panel1.add(from1)
                                    panel1.doLayout();
                                }
                            }
                        },
                        {
                            region: "center",
                            id:"panel1",
                            split: true,
                            border: false,
                            collapsible: false,
                            xtype: "panel",
                            autoScroll: true,
                            layout: "fit",
                            //items: [{
                            //    html: '<iframe id ="contentIframe" frameborder="0" height="100%" width="100%" src="/Admin/Organization/OrganizationManage"></iframe>'
                            //}]
                        }

            ]
        });
    });




</script>
















@*<div id="cc" class="easyui-layout" data-options="fit:true">
    <div data-options="region:'west',title:'组织机构',split:true" style="width: 150px; overflow: hidden">
         <ul id="orgtree"></ul>
    </div>
    <div data-options="region:'center'"  style="overflow: hidden;">
         
        
        <div id="p" style="overflow: hidden;"></div>   
    </div>
</div>*@














@*<script type="text/javascript">
    $("#orgtree").tree({
        url: '/Api/Organization/GetOrganizationsAndUser?id=null',
        animate: true,
        onLoadSuccess: function () {
            $("#orgtree").tree("collapseAll");
        },
        onClick: function (node) {
            if(node.attributes.Type=="user")
                OpenPanel("/Admin/Organization/UserManage?id=" + node.id + "&type=" + node.attributes.Type);
            else 
                OpenPanel("/Admin/Organization/OrganizationManage?id=" + node.id + "&type=" + node.attributes.Type);
        }
    });

    OpenPanel("/Admin/Organization/OrganizationAdd");

    function OpenPanel(href) {
        $('#p').panel({
            fit: true,
            content: '<iframe id="orgiframe" scrolling="no" frameborder="0"  src="' + href + '" style="width:100%;height:100%;overflow:hidden"></iframe>',
        }); 
    }

   
</script>*@